{"ast":null,"code":"import _slicedToArray from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import _objectSpread from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useEffect}from'react';import{Link,useHistory}from'react-router-dom';import configData from'../../../../config';// material-ui\nimport{makeStyles}from'@material-ui/styles';import{Box,Button,Checkbox,FormControl,FormControlLabel,FormHelperText,Grid,IconButton,InputAdornment,InputLabel,OutlinedInput,TextField,Typography,useMediaQuery}from'@material-ui/core';// third party\nimport*as Yup from'yup';import{Formik}from'formik';import axios from'axios';// project imports\nimport useScriptRef from'../../../../hooks/useScriptRef';import AnimateButton from'./../../../../ui-component/extended/AnimateButton';import{strengthColor,strengthIndicator}from'../../../../utils/password-strength';// assets\nimport Visibility from'@material-ui/icons/Visibility';import VisibilityOff from'@material-ui/icons/VisibilityOff';// style constant\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{redButton:_defineProperty({fontSize:'1rem',fontWeight:500,backgroundColor:theme.palette.grey[50],border:'1px solid',borderColor:theme.palette.grey[100],color:theme.palette.grey[700],textTransform:'none','&:hover':{backgroundColor:theme.palette.primary.light}},theme.breakpoints.down('sm'),{fontSize:'0.875rem'}),signDivider:{flexGrow:1},signText:{cursor:'unset',margin:theme.spacing(2),padding:'5px 56px',borderColor:theme.palette.grey[100]+' !important',color:theme.palette.grey[900]+'!important',fontWeight:500},loginIcon:_defineProperty({marginRight:'16px'},theme.breakpoints.down('sm'),{marginRight:'8px'}),loginInput:_objectSpread({},theme.typography.customInput)};});//===========================|| API JWT - REGISTER ||===========================//\nvar RestRegister=function RestRegister(_ref){var others=Object.assign({},(_objectDestructuringEmpty(_ref),_ref));var classes=useStyles();var history=useHistory();var scriptedRef=useScriptRef();var matchDownSM=useMediaQuery(function(theme){return theme.breakpoints.down('sm');});var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),showPassword=_React$useState2[0],setShowPassword=_React$useState2[1];var _React$useState3=React.useState(true),_React$useState4=_slicedToArray(_React$useState3,2),checked=_React$useState4[0],setChecked=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),strength=_React$useState6[0],setStrength=_React$useState6[1];var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),level=_React$useState8[0],setLevel=_React$useState8[1];var handleClickShowPassword=function handleClickShowPassword(){setShowPassword(!showPassword);};var handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};var changePassword=function changePassword(value){var temp=strengthIndicator(value);setStrength(temp);setLevel(strengthColor(temp));};useEffect(function(){changePassword('123456');},[]);return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{username:'',email:'',password:'',submit:null},validationSchema:Yup.object().shape({email:Yup.string().email('Must be a valid email').max(255).required('Email is required'),username:Yup.string().required('Username is required'),password:Yup.string().max(255).required('Password is required')}),onSubmit:function onSubmit(values,_ref2){var setErrors=_ref2.setErrors,setStatus=_ref2.setStatus,setSubmitting=_ref2.setSubmitting;try{axios.post(configData.API_SERVER+'users/register',{username:values.username,password:values.password,email:values.email}).then(function(response){if(response.data.success){history.push('/login');}else{setStatus({success:false});setErrors({submit:response.data.msg});setSubmitting(false);}}).catch(function(error){setStatus({success:false});setErrors({submit:error.response.data.msg});setSubmitting(false);});}catch(err){console.error(err);if(scriptedRef.current){setStatus({success:false});setErrors({submit:err.message});setSubmitting(false);}}},children:function children(_ref3){var errors=_ref3.errors,handleBlur=_ref3.handleBlur,handleChange=_ref3.handleChange,handleSubmit=_ref3.handleSubmit,isSubmitting=_ref3.isSubmitting,touched=_ref3.touched,values=_ref3.values;return/*#__PURE__*/_jsxs(\"form\",_objectSpread(_objectSpread({noValidate:true,onSubmit:handleSubmit},others),{},{children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:matchDownSM?0:2,children:/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Username\",margin:\"normal\",name:\"username\",id:\"username\",type:\"text\",value:values.username,onBlur:handleBlur,onChange:handleChange,className:classes.loginInput,error:touched.username&&Boolean(errors.username)}),touched.username&&errors.username&&/*#__PURE__*/_jsx(FormHelperText,{error:true,id:\"standard-weight-helper-text--register\",children:errors.username})]})}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean(touched.email&&errors.email),className:classes.loginInput,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-adornment-email-register\",children:\"Email\"}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"outlined-adornment-email-register\",type:\"email\",value:values.email,name:\"email\",onBlur:handleBlur,onChange:handleChange,inputProps:{classes:{notchedOutline:classes.notchedOutline}}}),touched.email&&errors.email&&/*#__PURE__*/_jsxs(FormHelperText,{error:true,id:\"standard-weight-helper-text--register\",children:[' ',errors.email,' ']})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean(touched.password&&errors.password),className:classes.loginInput,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-adornment-password-register\",children:\"Password\"}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"outlined-adornment-password-register\",type:showPassword?'text':'password',value:values.password,name:\"password\",label:\"Password\",onBlur:handleBlur,onChange:function onChange(e){handleChange(e);changePassword(e.target.value);},endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,onMouseDown:handleMouseDownPassword,edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(Visibility,{}):/*#__PURE__*/_jsx(VisibilityOff,{})})}),inputProps:{classes:{notchedOutline:classes.notchedOutline}}}),touched.password&&errors.password&&/*#__PURE__*/_jsx(FormHelperText,{error:true,id:\"standard-weight-helper-text-password-register\",children:errors.password})]}),strength!==0&&/*#__PURE__*/_jsx(FormControl,{fullWidth:true,children:/*#__PURE__*/_jsx(Box,{sx:{mb:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Box,{backgroundColor:level.color,sx:{width:85,height:8,borderRadius:'7px'}})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",fontSize:\"0.75rem\",children:level.label})})]})})}),/*#__PURE__*/_jsx(Grid,{container:true,alignItems:\"center\",justifyContent:\"space-between\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:checked,onChange:function onChange(event){return setChecked(event.target.checked);},name:\"checked\",color:\"primary\"}),label:/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Agree with \\xA0\",/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:Link,to:\"#\",children:\"Terms & Condition.\"})]})})})}),errors.submit&&/*#__PURE__*/_jsx(Box,{sx:{mt:3},children:/*#__PURE__*/_jsx(FormHelperText,{error:true,children:errors.submit})}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(AnimateButton,{children:/*#__PURE__*/_jsx(Button,{disableElevation:true,disabled:isSubmitting,fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",color:\"secondary\",children:\"Sign UP\"})})})]}));}})});};export default RestRegister;","map":null,"metadata":{},"sourceType":"module"}