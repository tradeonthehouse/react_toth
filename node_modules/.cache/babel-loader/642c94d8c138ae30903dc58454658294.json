{"ast":null,"code":"import _slicedToArray from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectDestructuringEmpty from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty\";import _objectSpread from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/Vishal/Desktop/django backend/react-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from'react';import{Link}from'react-router-dom';import{useDispatch}from'react-redux';import configData from'../../../../config';// material-ui\nimport{makeStyles}from'@material-ui/styles';import{Box,Button,Checkbox,FormControl,FormControlLabel,FormHelperText,IconButton,InputAdornment,InputLabel,OutlinedInput,Stack,Typography}from'@material-ui/core';// third party\nimport*as Yup from'yup';import{Formik}from'formik';import axios from'axios';// project imports\nimport useScriptRef from'../../../../hooks/useScriptRef';import AnimateButton from'../../../../ui-component/extended/AnimateButton';import{ACCOUNT_INITIALIZE}from'./../../../../store/actions';// assets\nimport Visibility from'@material-ui/icons/Visibility';import VisibilityOff from'@material-ui/icons/VisibilityOff';// style constant\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{redButton:_defineProperty({fontSize:'1rem',fontWeight:500,backgroundColor:theme.palette.grey[50],border:'1px solid',borderColor:theme.palette.grey[100],color:theme.palette.grey[700],textTransform:'none','&:hover':{backgroundColor:theme.palette.primary.light}},theme.breakpoints.down('sm'),{fontSize:'0.875rem'}),signDivider:{flexGrow:1},signText:{cursor:'unset',margin:theme.spacing(2),padding:'5px 56px',borderColor:theme.palette.grey[100]+' !important',color:theme.palette.grey[900]+'!important',fontWeight:500},loginIcon:_defineProperty({marginRight:'16px'},theme.breakpoints.down('sm'),{marginRight:'8px'}),loginInput:_objectSpread({},theme.typography.customInput)};});//============================|| API JWT - LOGIN ||============================//\nvar RestLogin=function RestLogin(props,_ref){var others=Object.assign({},(_objectDestructuringEmpty(_ref),_ref));var classes=useStyles();var dispatcher=useDispatch();var scriptedRef=useScriptRef();var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),checked=_React$useState2[0],setChecked=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),showPassword=_React$useState4[0],setShowPassword=_React$useState4[1];var handleClickShowPassword=function handleClickShowPassword(){setShowPassword(!showPassword);};var handleMouseDownPassword=function handleMouseDownPassword(event){event.preventDefault();};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:'',submit:null},validationSchema:Yup.object().shape({email:Yup.string().email('Must be a valid email').max(255).required('Email is required'),password:Yup.string().max(255).required('Password is required')}),onSubmit:function onSubmit(values,_ref2){var setErrors=_ref2.setErrors,setStatus=_ref2.setStatus,setSubmitting=_ref2.setSubmitting;try{axios.post(configData.API_SERVER+'users/login',{password:values.password,email:values.email}).then(function(response){if(response.data.success){console.log(response.data);dispatcher({type:ACCOUNT_INITIALIZE,payload:{isLoggedIn:true,user:response.data.user,token:response.data.token}});if(scriptedRef.current){setStatus({success:true});setSubmitting(false);}}else{setStatus({success:false});setErrors({submit:response.data.msg});setSubmitting(false);}}).catch(function(error){setStatus({success:false});setErrors({submit:error.response.data.msg});setSubmitting(false);});}catch(err){console.error(err);if(scriptedRef.current){setStatus({success:false});setErrors({submit:err.message});setSubmitting(false);}}},children:function children(_ref3){var errors=_ref3.errors,handleBlur=_ref3.handleBlur,handleChange=_ref3.handleChange,handleSubmit=_ref3.handleSubmit,isSubmitting=_ref3.isSubmitting,touched=_ref3.touched,values=_ref3.values;return/*#__PURE__*/_jsxs(\"form\",_objectSpread(_objectSpread({noValidate:true,onSubmit:handleSubmit},others),{},{children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean(touched.email&&errors.email),className:classes.loginInput,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-adornment-email-login\",children:\"Email\"}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"outlined-adornment-email-login\",type:\"email\",value:values.email,name:\"email\",onBlur:handleBlur,onChange:handleChange,label:\"Email Address\",inputProps:{classes:{notchedOutline:classes.notchedOutline}}}),touched.email&&errors.email&&/*#__PURE__*/_jsxs(FormHelperText,{error:true,id:\"standard-weight-helper-text-email-login\",children:[' ',errors.email,' ']})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:Boolean(touched.password&&errors.password),className:classes.loginInput,children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"outlined-adornment-password-login\",children:\"Password\"}),/*#__PURE__*/_jsx(OutlinedInput,{id:\"outlined-adornment-password-login\",type:showPassword?'text':'password',value:values.password,name:\"password\",onBlur:handleBlur,onChange:handleChange,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:handleClickShowPassword,onMouseDown:handleMouseDownPassword,edge:\"end\",children:showPassword?/*#__PURE__*/_jsx(Visibility,{}):/*#__PURE__*/_jsx(VisibilityOff,{})})}),label:\"Password\",inputProps:{classes:{notchedOutline:classes.notchedOutline}}}),touched.password&&errors.password&&/*#__PURE__*/_jsxs(FormHelperText,{error:true,id:\"standard-weight-helper-text-password-login\",children:[' ',errors.password,' ']})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",alignItems:\"center\",justifyContent:\"space-between\",spacing:1,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{checked:checked,onChange:function onChange(event){return setChecked(event.target.checked);},name:\"checked\",color:\"primary\"}),label:\"Remember me\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",component:Link,to:props.login?'/pages/forgot-password/forgot-password'+props.login:'#',color:\"secondary\",sx:{textDecoration:'none'},children:\"Forgot Password?\"})]}),errors.submit&&/*#__PURE__*/_jsx(Box,{sx:{mt:3},children:/*#__PURE__*/_jsx(FormHelperText,{error:true,children:errors.submit})}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(AnimateButton,{children:/*#__PURE__*/_jsx(Button,{disableElevation:true,disabled:isSubmitting,fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\",color:\"secondary\",children:\"Sign IN\"})})})]}));}})});};export default RestLogin;","map":null,"metadata":{},"sourceType":"module"}